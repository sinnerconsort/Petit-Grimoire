/* ============================================
   PETIT GRIMOIRE - Main Styles
   7 Themed Decks × Compact Variants
   Two Independent FABs
   ============================================ */

/* ============================================
   THEME VARIABLES (defaults = Guardian)
   ============================================ */

.mg-fab {
    /* Compact - outer ring */
    --mg-ring: linear-gradient(145deg, #f3aa1e, #d89520);
    --mg-ring-border: #b8860b;
    --mg-glow: rgba(243, 170, 30, 0.5);
    /* Compact - inner face */
    --mg-face: linear-gradient(145deg, #e89ac0, #dc78aa);
    --mg-face-border: #c5608f;
    /* Compact - center accent */
    --mg-star: #f3aa1e;
    --mg-sparkle: #f3aa1e;
    /* Compact - gems */
    --mg-gem-1: #e71720;
    --mg-gem-2: #26508a;
    --mg-gem-3: #dc78aa;
    --mg-gem-4: #f3aa1e;
    /* Compact - accent (crescent, clasp, antenna) */
    --mg-accent: #f3aa1e;
    --mg-accent-border: #b8860b;
    /* Compact - secondary face (screen, locket inner) */
    --mg-face-alt: linear-gradient(145deg, #fce4ec, #f8bbd0);
    
    /* Tama colors */
    --mg-tama-bg: rgba(220, 120, 170, 0.95);
    --mg-tama-border: #b85a8a;
    --mg-tama-shadow: rgba(220, 120, 170, 0.4);
    --mg-tama-screen: #fce4ec;
    --mg-tama-screen-border: #dc78aa;
    --mg-tama-text: #4a1530;
    --mg-btn-1: #dc78aa;
    --mg-btn-2: #c5608f;
    --mg-btn-border: #a04872;
    
    /* Speech */
    --mg-speech-bg: #dc78aa;
    --mg-speech-border: #b85a8a;
    --mg-speech-text: #4a1530;
    
    /* CRT screen effects */
    --mg-crt-glow: rgba(220, 120, 170, 0.15);
    --mg-crt-scanline: rgba(74, 21, 48, 0.05);
    --mg-crt-divider: rgba(220, 120, 170, 0.12);
    --mg-crt-flash: rgba(243, 170, 30, 0.85);
}

/* ============================================
   SHARED FAB BASE
   ============================================ */

.mg-fab {
    position: fixed;
    z-index: 99999;
    display: flex;
    visibility: visible;
    opacity: 1;
    cursor: pointer;
    transition: opacity 0.2s ease;
    touch-action: none;
    user-select: none;
    pointer-events: auto;
}

.mg-fab.dragging {
    opacity: 0.7;
    transition: none !important;
    cursor: grabbing !important;
}

/* ============================================
   COMPACT BROOCH - Base Structure
   ============================================ */

.mg-compact {
    /* Position set by JS via top/left only */
}

.mg-compact .mg-compact-body {
    position: relative;
    width: 56px;
    height: 56px;
    transition: transform 0.2s ease;
}

.mg-compact:hover .mg-compact-body {
    transform: scale(1.08);
}

.mg-compact:active .mg-compact-body {
    transform: scale(0.95);
}

/* Ring (outer shell) */
.mg-compact-ring {
    position: absolute;
    inset: 0;
    background: var(--mg-ring);
    border: 3px solid var(--mg-ring-border);
    box-shadow: 
        0 3px 12px var(--mg-glow),
        0 0 20px var(--mg-glow),
        inset 0 2px 4px rgba(255, 255, 255, 0.4),
        inset 0 -2px 4px rgba(0, 0, 0, 0.2);
    transition: box-shadow 0.3s ease;
    overflow: hidden;
}

/* Face (inner) */
.mg-compact-face {
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    bottom: 8px;
    background: var(--mg-face);
    border: 2px solid var(--mg-face-border);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.5);
}

/* Star */
.mg-compact-star {
    font-size: 20px;
    color: var(--mg-star);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    animation: mgStarPulse 2s ease-in-out infinite;
    line-height: 1;
}

@keyframes mgStarPulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.12); opacity: 0.85; }
}

/* Gems */
.mg-compact-gem {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.5);
    z-index: 2;
}

.mg-compact-gem--1 { background: var(--mg-gem-1); top: 2px; left: 50%; transform: translateX(-50%); }
.mg-compact-gem--2 { background: var(--mg-gem-2); bottom: 2px; left: 50%; transform: translateX(-50%); }
.mg-compact-gem--3 { background: var(--mg-gem-3); left: 2px; top: 50%; transform: translateY(-50%); }
.mg-compact-gem--4 { background: var(--mg-gem-4); right: 2px; top: 50%; transform: translateY(-50%); }

/* Sparkles */
.mg-compact-sparkles {
    position: absolute;
    inset: -10px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mg-compact:hover .mg-compact-sparkles { opacity: 1; }

.mg-compact-sparkles span {
    position: absolute;
    color: var(--mg-sparkle);
    font-size: 10px;
    animation: mgSparkle 1.5s ease-in-out infinite;
}

.mg-compact-sparkles span:nth-child(1) { top: 0; left: 50%; animation-delay: 0s; }
.mg-compact-sparkles span:nth-child(2) { right: -2px; top: 50%; animation-delay: 0.4s; }
.mg-compact-sparkles span:nth-child(3) { bottom: 0; left: 50%; animation-delay: 0.8s; }
.mg-compact-sparkles span:nth-child(4) { left: -2px; top: 50%; animation-delay: 1.2s; }

@keyframes mgSparkle {
    0%, 100% { transform: translateY(0) scale(1); opacity: 0.4; }
    50% { transform: translateY(-4px) scale(1.4); opacity: 1; }
}


/* ══════════════════════════════════════════════
   VARIANT 1: CRYSTAL STAR BROOCH (round)
   ══════════════════════════════════════════════ */

[data-mg-variant="crystal-star"] .mg-compact-ring {
    border-radius: 50%;
}

[data-mg-variant="crystal-star"] .mg-compact-face {
    border-radius: 50%;
}

/* Wing accents on ring */
[data-mg-variant="crystal-star"] .mg-compact-ring::after {
    content: '';
    position: absolute;
    top: 50%;
    left: -3px;
    right: -3px;
    height: 6px;
    background: var(--mg-accent);
    transform: translateY(-50%);
    clip-path: polygon(0% 50%, 15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%);
    opacity: 0.6;
    z-index: -1;
}


/* ══════════════════════════════════════════════
   COMPACT ANIMATIONS
   ══════════════════════════════════════════════ */

.mg-compact.transforming .mg-compact-body {
    animation: mgTransform 0.8s ease-out forwards;
}

@keyframes mgTransform {
    0% { transform: scale(1) rotate(0deg); }
    30% { transform: scale(1.4) rotate(180deg); }
    60% { transform: scale(1.6) rotate(360deg); filter: brightness(1.5); }
    100% { transform: scale(1) rotate(720deg); filter: brightness(1); }
}

.mg-compact.transforming .mg-compact-sparkles {
    opacity: 1;
    animation: mgSparklesBurst 0.8s ease-out forwards;
}

@keyframes mgSparklesBurst {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(2.5); opacity: 1; }
    100% { transform: scale(3.5); opacity: 0; }
}

.mg-compact.active .mg-compact-star {
    animation: mgStarSpin 2s linear infinite;
}

.mg-compact.active .mg-compact-ring {
    box-shadow: 
        0 0 15px var(--mg-glow),
        0 0 30px var(--mg-glow),
        inset 0 2px 4px rgba(255, 255, 255, 0.4);
}

@keyframes mgStarSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}


/* ══════════════════════════════════════════════
   COMPACT SIZES
   ══════════════════════════════════════════════ */

[data-mg-size="small"].mg-compact .mg-compact-body {
    transform: scale(0.75);
    transform-origin: center;
}

[data-mg-size="small"].mg-compact:hover .mg-compact-body {
    transform: scale(0.82);
}

[data-mg-size="large"].mg-compact .mg-compact-body {
    transform: scale(1.25);
    transform-origin: center;
}

[data-mg-size="large"].mg-compact:hover .mg-compact-body {
    transform: scale(1.35);
}


/* ══════════════════════════════════════════════
   TAMA (independent pet widget)
   ══════════════════════════════════════════════ */

.mg-tama {
    /* Position set by JS via top/left only */
}

.mg-tama-shell {
    background: var(--mg-tama-bg);
    border: 2px solid var(--mg-tama-border);
    padding: 8px 8px 6px;
    box-shadow: 
        0 4px 16px var(--mg-tama-shadow),
        inset 0 1px 2px rgba(255, 255, 255, 0.3);
    border-radius: 16px 16px 12px 12px;
    transition: transform 0.15s ease;
    position: relative;
}

.mg-tama:hover .mg-tama-shell {
    transform: scale(1.03);
}

.mg-tama:active .mg-tama-shell {
    transform: scale(0.97);
}

/* Antenna nub */
.mg-tama-antenna {
    width: 8px;
    height: 8px;
    background: var(--mg-tama-border);
    border-radius: 50%;
    margin: 0 auto 2px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* CRT Screen */
.mg-tama-screen {
    width: 100px;
    height: 80px;
    background: var(--mg-tama-screen);
    border: 2px solid var(--mg-tama-screen-border);
    border-radius: 10px / 12px;
    margin: 0 auto;
    overflow: hidden;
    position: relative;
    image-rendering: pixelated;
    box-shadow: 
        inset 0 0 12px var(--mg-crt-glow, rgba(0, 200, 100, 0.1)),
        inset 0 2px 4px rgba(0, 0, 0, 0.15),
        0 1px 3px rgba(0, 0, 0, 0.2);
}

/* CRT Scanlines */
.mg-tama-scanlines {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        var(--mg-crt-scanline, rgba(0, 0, 0, 0.04)) 2px,
        var(--mg-crt-scanline, rgba(0, 0, 0, 0.04)) 4px
    );
    pointer-events: none;
    z-index: 3;
    border-radius: inherit;
}

/* CRT screen curve highlight */
.mg-tama-screen::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: radial-gradient(
        ellipse at 30% 20%,
        rgba(255, 255, 255, 0.12) 0%,
        transparent 60%
    );
    pointer-events: none;
    z-index: 4;
}

.mg-tama-status {
    display: flex;
    justify-content: space-between;
    padding: 3px 5px 2px;
    font-size: 9px;
    line-height: 1;
    color: var(--mg-tama-text);
    font-family: monospace;
    border-bottom: 1px solid var(--mg-crt-divider, rgba(0, 0, 0, 0.08));
    position: relative;
    z-index: 2;
}

.mg-tama-stat {
    display: flex;
    align-items: center;
    gap: 2px;
}

.mg-tama-stat svg {
    flex-shrink: 0;
    opacity: 0.8;
}

.mg-tama-sprite {
    width: 100%;
    height: 46px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: monospace;
    font-size: 10px;
    line-height: 1.1;
    white-space: pre;
    color: var(--mg-tama-text);
    padding: 1px 4px;
    position: relative;
    z-index: 2;
}

.mg-tama-flash {
    position: absolute;
    inset: 0;
    background: var(--mg-crt-flash, rgba(255, 215, 0, 0.85));
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    z-index: 5;
    color: var(--mg-tama-text);
}

.mg-tama-flash.visible {
    animation: mgCardFlash 0.5s ease-out forwards;
}

@keyframes mgCardFlash {
    0% { opacity: 0; transform: scale(0.5); }
    30% { opacity: 1; transform: scale(1.2); }
    60% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.8); }
}

.mg-tama-mood {
    text-align: center;
    font-size: 8px;
    font-family: monospace;
    color: var(--mg-tama-text);
    padding: 1px 0;
    opacity: 0.7;
    line-height: 1;
    position: relative;
    z-index: 2;
}

.mg-tama-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 5px;
    padding-bottom: 2px;
}

.mg-tama-btn {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid var(--mg-btn-border);
    background: linear-gradient(145deg, var(--mg-btn-1), var(--mg-btn-2));
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    color: #fff;
    box-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.25),
        inset 0 1px 2px rgba(255, 255, 255, 0.3);
    transition: all 0.1s ease;
}

.mg-tama-btn svg {
    width: 10px;
    height: 10px;
    stroke-width: 1.8;
}

.mg-tama-btn:hover { transform: scale(1.15); }
.mg-tama-btn:active { transform: translateY(1px) scale(0.95); }

.mg-tama-heart svg {
    animation: mgHeartPulse 1s ease-in-out infinite;
}

@keyframes mgHeartPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.3); }
}


/* ══════════════════════════════════════════════
   TAMA SIZES
   ══════════════════════════════════════════════ */

[data-mg-size="small"].mg-tama .mg-tama-shell {
    transform: scale(0.8);
    transform-origin: center center;
}

[data-mg-size="large"].mg-tama .mg-tama-shell {
    transform: scale(1.2);
    transform-origin: center center;
}


/* ══════════════════════════════════════════════
   THEME: UMBRA (Shadow / Grief Seeds)
   ══════════════════════════════════════════════ */

[data-mg-theme="umbra"] {
    --mg-ring: linear-gradient(145deg, #40104a, #2d0835);
    --mg-ring-border: #1a0420;
    --mg-glow: rgba(148, 14, 143, 0.6);
    --mg-face: linear-gradient(145deg, #b030a8, #940e8f);
    --mg-face-border: #5d0971;
    --mg-star: #d89520;
    --mg-sparkle: #c8b1f7;
    --mg-gem-1: #d89520;
    --mg-gem-2: #940e8f;
    --mg-gem-3: #5d0971;
    --mg-gem-4: #c8b1f7;
    --mg-accent: #d89520;
    --mg-accent-border: #a07018;
    --mg-face-alt: linear-gradient(145deg, #2d0835, #1a0420);
    
    --mg-tama-bg: rgba(45, 8, 53, 0.95);
    --mg-tama-border: #940e8f;
    --mg-tama-shadow: rgba(148, 14, 143, 0.4);
    --mg-tama-screen: #1a0825;
    --mg-tama-screen-border: #5d0971;
    --mg-tama-text: #c8b1f7;
    --mg-btn-1: #940e8f;
    --mg-btn-2: #750a70;
    --mg-btn-border: #5d0971;
    
    --mg-speech-bg: #2d0835;
    --mg-speech-border: #940e8f;
    --mg-speech-text: #c8b1f7;
    
    --mg-crt-glow: rgba(148, 14, 143, 0.2);
    --mg-crt-scanline: rgba(93, 9, 113, 0.08);
    --mg-crt-divider: rgba(148, 14, 143, 0.15);
    --mg-crt-flash: rgba(216, 149, 32, 0.85);
}

[data-mg-theme="umbra"] .mg-compact-star {
    text-shadow: 0 0 8px #d89520, 0 0 16px #940e8f;
}


/* ══════════════════════════════════════════════
   THEME: APOTHECARY (Herbs & Botanicals)
   ══════════════════════════════════════════════ */

[data-mg-theme="apothecary"] {
    --mg-ring: linear-gradient(145deg, #8d5c3a, #76482e);
    --mg-ring-border: #5a3420;
    --mg-glow: rgba(76, 107, 32, 0.4);
    --mg-face: linear-gradient(145deg, #5a7a28, #4c6b20);
    --mg-face-border: #3d5618;
    --mg-star: #bdbf46;
    --mg-sparkle: #e9ae75;
    --mg-gem-1: #bdbf46;
    --mg-gem-2: #4c6b20;
    --mg-gem-3: #e9ae75;
    --mg-gem-4: #76482e;
    --mg-accent: #76482e;
    --mg-accent-border: #5a3420;
    --mg-face-alt: linear-gradient(145deg, #f5ecd5, #e8dcc0);
    
    --mg-tama-bg: rgba(118, 72, 46, 0.95);
    --mg-tama-border: #4c6b20;
    --mg-tama-shadow: rgba(76, 107, 32, 0.3);
    --mg-tama-screen: #f5ecd5;
    --mg-tama-screen-border: #c8a870;
    --mg-tama-text: #3a2a18;
    --mg-btn-1: #4c6b20;
    --mg-btn-2: #3d5618;
    --mg-btn-border: #76482e;
    
    --mg-speech-bg: #76482e;
    --mg-speech-border: #4c6b20;
    --mg-speech-text: #f5ecd5;
    
    --mg-crt-glow: rgba(76, 107, 32, 0.15);
    --mg-crt-scanline: rgba(58, 42, 24, 0.06);
    --mg-crt-divider: rgba(76, 107, 32, 0.12);
    --mg-crt-flash: rgba(189, 191, 70, 0.85);
}

[data-mg-theme="apothecary"] .mg-compact-star {
    text-shadow: 0 0 6px #bdbf46;
}


/* ══════════════════════════════════════════════
   THEME: MOONSTONE (Crystals & Moon Phases)
   ══════════════════════════════════════════════ */

[data-mg-theme="moonstone"] {
    --mg-ring: linear-gradient(145deg, #e8dcff, #d9c7fb);
    --mg-ring-border: #b8a0e0;
    --mg-glow: rgba(214, 146, 255, 0.5);
    --mg-face: linear-gradient(145deg, #feebff, #d9c7fb);
    --mg-face-border: #d692ff;
    --mg-star: #d692ff;
    --mg-sparkle: #bcf1fd;
    --mg-gem-1: #d692ff;
    --mg-gem-2: #bcf1fd;
    --mg-gem-3: #d692ff;
    --mg-gem-4: #bcf1fd;
    --mg-accent: #bcf1fd;
    --mg-accent-border: #90d0e0;
    --mg-face-alt: linear-gradient(145deg, #feebff, #e8dcff);
    
    --mg-tama-bg: rgba(217, 199, 251, 0.95);
    --mg-tama-border: #d692ff;
    --mg-tama-shadow: rgba(214, 146, 255, 0.4);
    --mg-tama-screen: #2a2040;
    --mg-tama-screen-border: #d692ff;
    --mg-tama-text: #feebff;
    --mg-btn-1: #d692ff;
    --mg-btn-2: #c070ee;
    --mg-btn-border: #bcf1fd;
    
    --mg-speech-bg: #e8dcff;
    --mg-speech-border: #d692ff;
    --mg-speech-text: #3a2050;
    
    --mg-crt-glow: rgba(214, 146, 255, 0.2);
    --mg-crt-scanline: rgba(42, 32, 64, 0.08);
    --mg-crt-divider: rgba(214, 146, 255, 0.15);
    --mg-crt-flash: rgba(188, 241, 253, 0.85);
}


/* ══════════════════════════════════════════════
   THEME: PHOSPHOR (Neon / Vaporwave)
   ══════════════════════════════════════════════ */

[data-mg-theme="phosphor"] {
    --mg-ring: linear-gradient(145deg, #7375ca, #4a4c90, #f990f6);
    --mg-ring-border: #120147;
    --mg-glow: rgba(249, 144, 246, 0.5);
    --mg-face: linear-gradient(145deg, #1e0860, #120147);
    --mg-face-border: #f990f6;
    --mg-star: #f990f6;
    --mg-sparkle: #7375ca;
    --mg-gem-1: #f990f6;
    --mg-gem-2: #7375ca;
    --mg-gem-3: #f990f6;
    --mg-gem-4: #feffff;
    --mg-accent: #7375ca;
    --mg-accent-border: #4a4c90;
    --mg-face-alt: linear-gradient(145deg, #150650, #0a0030);
    
    --mg-tama-bg: rgba(18, 1, 71, 0.95);
    --mg-tama-border: #7375ca;
    --mg-tama-shadow: rgba(115, 117, 202, 0.4);
    --mg-tama-screen: #0a0030;
    --mg-tama-screen-border: #f990f6;
    --mg-tama-text: #feffff;
    --mg-btn-1: #f990f6;
    --mg-btn-2: #d070d0;
    --mg-btn-border: #7375ca;
    
    --mg-speech-bg: #120147;
    --mg-speech-border: #f990f6;
    --mg-speech-text: #feffff;
    
    --mg-crt-glow: rgba(249, 144, 246, 0.2);
    --mg-crt-scanline: rgba(18, 1, 71, 0.1);
    --mg-crt-divider: rgba(115, 117, 202, 0.15);
    --mg-crt-flash: rgba(249, 144, 246, 0.85);
}

[data-mg-theme="phosphor"] .mg-compact-ring {
    animation: mgPhosphorShimmer 3s ease-in-out infinite;
}

@keyframes mgPhosphorShimmer {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(25deg); }
}

[data-mg-theme="phosphor"] .mg-compact-star {
    text-shadow: 0 0 8px #f990f6, 0 0 16px #7375ca;
}


/* ══════════════════════════════════════════════
   THEME: ROSEWOOD (Floral / Dream Parlour)
   ══════════════════════════════════════════════ */

[data-mg-theme="rosewood"] {
    --mg-ring: linear-gradient(145deg, #edc5cf, #e4b0bc);
    --mg-ring-border: #c8909e;
    --mg-glow: rgba(228, 176, 188, 0.5);
    --mg-face: linear-gradient(145deg, #faf0f2, #f0e0e5);
    --mg-face-border: #c8909e;
    --mg-star: #177656;
    --mg-sparkle: #83b6ac;
    --mg-gem-1: #83b6ac;
    --mg-gem-2: #177656;
    --mg-gem-3: #e4b0bc;
    --mg-gem-4: #83b6ac;
    --mg-accent: #83b6ac;
    --mg-accent-border: #5a9080;
    --mg-face-alt: linear-gradient(145deg, #faf5f6, #f0e8ea);
    
    --mg-tama-bg: rgba(228, 176, 188, 0.95);
    --mg-tama-border: #c8909e;
    --mg-tama-shadow: rgba(228, 176, 188, 0.4);
    --mg-tama-screen: #faf0f2;
    --mg-tama-screen-border: #d8b8c0;
    --mg-tama-text: #4a2030;
    --mg-btn-1: #83b6ac;
    --mg-btn-2: #177656;
    --mg-btn-border: #c8909e;
    
    --mg-speech-bg: #f0e0e5;
    --mg-speech-border: #c8909e;
    --mg-speech-text: #4a2030;
    
    --mg-crt-glow: rgba(131, 182, 172, 0.15);
    --mg-crt-scanline: rgba(74, 32, 48, 0.04);
    --mg-crt-divider: rgba(200, 144, 158, 0.12);
    --mg-crt-flash: rgba(131, 182, 172, 0.85);
}


/* ══════════════════════════════════════════════
   THEME: CELESTIAL (Starbound Grimoire)
   ══════════════════════════════════════════════ */

[data-mg-theme="celestial"] {
    --mg-ring: linear-gradient(145deg, #e3b35f, #c89840);
    --mg-ring-border: #9a7528;
    --mg-glow: rgba(227, 179, 95, 0.5);
    --mg-face: linear-gradient(145deg, #0a3d9a, #002f86);
    --mg-face-border: #e3b35f;
    --mg-star: #fbe09c;
    --mg-sparkle: #e3b35f;
    --mg-gem-1: #e3b35f;
    --mg-gem-2: #fbe09c;
    --mg-gem-3: #002f86;
    --mg-gem-4: #e3b35f;
    --mg-accent: #e3b35f;
    --mg-accent-border: #9a7528;
    --mg-face-alt: linear-gradient(145deg, #132040, #0a1525);
    
    --mg-tama-bg: rgba(0, 47, 134, 0.95);
    --mg-tama-border: #e3b35f;
    --mg-tama-shadow: rgba(0, 47, 134, 0.5);
    --mg-tama-screen: #0a1525;
    --mg-tama-screen-border: #e3b35f;
    --mg-tama-text: #fbe09c;
    --mg-btn-1: #e3b35f;
    --mg-btn-2: #c89840;
    --mg-btn-border: #002f86;
    
    --mg-speech-bg: #132040;
    --mg-speech-border: #e3b35f;
    --mg-speech-text: #fbe09c;
    
    --mg-crt-glow: rgba(227, 179, 95, 0.15);
    --mg-crt-scanline: rgba(19, 32, 64, 0.08);
    --mg-crt-divider: rgba(227, 179, 95, 0.12);
    --mg-crt-flash: rgba(251, 224, 156, 0.85);
}

[data-mg-theme="celestial"] .mg-compact-star {
    text-shadow: 0 0 8px #fbe09c, 0 0 16px #e3b35f;
}

[data-mg-theme="celestial"] .mg-compact-ring {
    animation: mgCelestialPulse 4s ease-in-out infinite;
}

@keyframes mgCelestialPulse {
    0%, 100% { box-shadow: 0 3px 12px var(--mg-glow), 0 0 20px var(--mg-glow), inset 0 2px 4px rgba(255, 255, 255, 0.4); }
    50% { box-shadow: 0 3px 18px var(--mg-glow), 0 0 35px var(--mg-glow), inset 0 2px 4px rgba(255, 255, 255, 0.5); }
}


/* ══════════════════════════════════════════════
   MOBILE
   ══════════════════════════════════════════════ */

@media (max-width: 768px) {
    .mg-compact .mg-compact-body {
        width: 50px;
        height: 50px;
    }
    
    .mg-compact-star {
        font-size: 18px;
    }
}
